{"/home/travis/build/npmtest/node-npmtest-phonegap-plugin-barcodescanner/test.js":"/* istanbul instrument in package npmtest_phonegap_plugin_barcodescanner */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - init-before\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        switch (local.modeJs) {\n        // re-init local from window.local\n        case 'browser':\n            local = local.global.utility2.objectSetDefault(\n                local.global.utility2_rollup || local.global.local,\n                local.global.utility2\n            );\n            break;\n        // re-init local from example.js\n        case 'node':\n            local = (local.global.utility2_rollup || require('utility2'))\n                .requireReadme();\n            break;\n        }\n        // export local\n        local.global.local = local;\n    }());\n\n\n\n    // run shared js-env code - function\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - function\n    case 'browser':\n        break;\n\n\n\n    // run node js-env code - function\n    case 'node':\n        break;\n    }\n\n\n\n    // run shared js-env code - init-after\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - init-after\n    case 'browser':\n        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test browsers's null-case handling-behavior-behavior\n         */\n            onError(null, options);\n        };\n\n        // run tests\n        local.nop(local.modeTest &&\n            document.querySelector('#testRunButton1') &&\n            document.querySelector('#testRunButton1').click());\n        break;\n\n\n\n    // run node js-env code - init-after\n    /* istanbul ignore next */\n    case 'node':\n        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApidoc's default handling-behavior-behavior\n         */\n            options = { modulePathList: module.paths };\n            local.buildApidoc(options, onError);\n        };\n\n        local.testCase_buildApp_default = local.testCase_buildApp_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApp's default handling-behavior-behavior\n         */\n            local.testCase_buildReadme_default(options, local.onErrorThrow);\n            local.testCase_buildLib_default(options, local.onErrorThrow);\n            local.testCase_buildTest_default(options, local.onErrorThrow);\n            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);\n            options = [];\n            local.buildApp(options, onError);\n        };\n\n        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||\n            function (options, onError) {\n            /*\n             * this function will test buildCustomOrg's default handling-behavior\n             */\n                options = {};\n                local.buildCustomOrg(options, onError);\n            };\n\n        local.testCase_buildLib_default = local.testCase_buildLib_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildLib's default handling-behavior\n         */\n            options = {};\n            local.buildLib(options, onError);\n        };\n\n        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildReadme's default handling-behavior-behavior\n         */\n            options = {};\n            local.buildReadme(options, onError);\n        };\n\n        local.testCase_buildTest_default = local.testCase_buildTest_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildTest's default handling-behavior\n         */\n            options = {};\n            local.buildTest(options, onError);\n        };\n\n        local.testCase_webpage_default = local.testCase_webpage_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test webpage's default handling-behavior\n         */\n            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };\n            local.browserTest(options, onError);\n        };\n\n        // run test-server\n        local.testRunServer(local);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-phonegap-plugin-barcodescanner/lib.npmtest_phonegap_plugin_barcodescanner.js":"/* istanbul instrument in package npmtest_phonegap_plugin_barcodescanner */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - init-before\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || local;\n        // init lib\n        local.local = local.npmtest_phonegap_plugin_barcodescanner = local;\n        // init exports\n        if (local.modeJs === 'browser') {\n            local.global.utility2_npmtest_phonegap_plugin_barcodescanner = local;\n        } else {\n            module.exports = local;\n            module.exports.__dirname = __dirname;\n            module.exports.module = module;\n        }\n    }());\n}());\n","/home/travis/build/npmtest/node-npmtest-phonegap-plugin-barcodescanner/example.js":"/*\nexample.js\n\nquickstart example\n\ninstruction\n    1. save this script as example.js\n    2. run the shell command:\n        $ npm install npmtest-phonegap-plugin-barcodescanner && PORT=8081 node example.js\n    3. play with the browser-demo on http://127.0.0.1:8081\n*/\n\n\n\n/* istanbul instrument in package npmtest_phonegap_plugin_barcodescanner */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - init-before\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || (local.modeJs === 'browser'\n            ? local.global.utility2_npmtest_phonegap_plugin_barcodescanner\n            : global.utility2_moduleExports);\n        // export local\n        local.global.local = local;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // init-after\n    // run browser js-env code - init-after\n    /* istanbul ignore next */\n    case 'browser':\n        local.testRunBrowser = function (event) {\n            if (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('onreset'))) {\n                // reset output\n                Array.from(\n                    document.querySelectorAll('body > .resettable')\n                ).forEach(function (element) {\n                    switch (element.tagName) {\n                    case 'INPUT':\n                    case 'TEXTAREA':\n                        element.value = '';\n                        break;\n                    default:\n                        element.textContent = '';\n                    }\n                });\n            }\n            switch (event && event.currentTarget && event.currentTarget.id) {\n            case 'testRunButton1':\n                // show tests\n                if (document.querySelector('#testReportDiv1').style.display === 'none') {\n                    document.querySelector('#testReportDiv1').style.display = 'block';\n                    document.querySelector('#testRunButton1').textContent =\n                        'hide internal test';\n                    local.modeTest = true;\n                    local.testRunDefault(local);\n                // hide tests\n                } else {\n                    document.querySelector('#testReportDiv1').style.display = 'none';\n                    document.querySelector('#testRunButton1').textContent = 'run internal test';\n                }\n                break;\n            // custom-case\n            default:\n                break;\n            }\n            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('oneval')))) {\n                // try to eval input-code\n                try {\n                    /*jslint evil: true*/\n                    eval(document.querySelector('#inputTextareaEval1').value);\n                } catch (errorCaught) {\n                    console.error(errorCaught);\n                }\n            }\n        };\n        // log stderr and stdout to #outputTextareaStdout1\n        ['error', 'log'].forEach(function (key) {\n            console[key + '_original'] = console[key];\n            console[key] = function () {\n                var element;\n                console[key + '_original'].apply(console, arguments);\n                element = document.querySelector('#outputTextareaStdout1');\n                if (!element) {\n                    return;\n                }\n                // append text to #outputTextareaStdout1\n                element.value += Array.from(arguments).map(function (arg) {\n                    return typeof arg === 'string'\n                        ? arg\n                        : JSON.stringify(arg, null, 4);\n                }).join(' ') + '\\n';\n                // scroll textarea to bottom\n                element.scrollTop = element.scrollHeight;\n            };\n        });\n        // init event-handling\n        ['change', 'click', 'keyup'].forEach(function (event) {\n            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {\n                element.addEventListener(event, local.testRunBrowser);\n            });\n        });\n        // run tests\n        local.testRunBrowser();\n        break;\n\n\n\n    // run node js-env code - init-after\n    /* istanbul ignore next */\n    case 'node':\n        // export local\n        module.exports = local;\n        // require modules\n        local.fs = require('fs');\n        local.http = require('http');\n        local.url = require('url');\n        // init assets\n        local.assetsDict = local.assetsDict || {};\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.index.template.html'] = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"UTF-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n    box-sizing: false,\\n\\\n    universal-selector: false\\n\\\n*/\\n\\\n* {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\nbody {\\n\\\n    background: #dde;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    margin: 2rem;\\n\\\n}\\n\\\nbody > * {\\n\\\n    margin-bottom: 1rem;\\n\\\n}\\n\\\n.utility2FooterDiv {\\n\\\n    margin-top: 20px;\\n\\\n    text-align: center;\\n\\\n}\\n\\\n</style>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n*/\\n\\\ntextarea {\\n\\\n    font-family: monospace;\\n\\\n    height: 10rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\ntextarea[readonly] {\\n\\\n    background: #ddd;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n<!-- utility2-comment\\n\\\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\\nutility2-comment -->\\n\\\n<h1>\\n\\\n<!-- utility2-comment\\n\\\n    <a\\n\\\n        {{#if env.npm_package_homepage}}\\n\\\n        href=\"{{env.npm_package_homepage}}\"\\n\\\n        {{/if env.npm_package_homepage}}\\n\\\n        target=\"_blank\"\\n\\\n    >\\n\\\nutility2-comment -->\\n\\\n        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\\n<!-- utility2-comment\\n\\\n    </a>\\n\\\nutility2-comment -->\\n\\\n</h1>\\n\\\n<h3>{{env.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\\n<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n\\n\\\n\\n\\\n<label>stderr and stdout</label>\\n\\\n<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n{{#if isRollup}}\\n\\\n<script src=\"assets.app.js\"></script>\\n\\\n{{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n<script src=\"assets.utility2.rollup.js\"></script>\\n\\\n<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\\n<script src=\"assets.npmtest_phonegap_plugin_barcodescanner.rollup.js\"></script>\\n\\\n<script src=\"assets.example.js\"></script>\\n\\\n<script src=\"assets.test.js\"></script>\\n\\\n<!-- utility2-comment\\n\\\n{{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n<div class=\"utility2FooterDiv\">\\n\\\n    [ this app was created with\\n\\\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n    ]\\n\\\n</div>\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n        /* jslint-ignore-end */\n        if (local.templateRender) {\n            local.assetsDict['/'] = local.templateRender(\n                local.assetsDict['/assets.index.template.html'],\n                {\n                    env: local.objectSetDefault(local.env, {\n                        npm_package_description: 'the greatest app in the world!',\n                        npm_package_name: 'my-app',\n                        npm_package_nameAlias: 'my_app',\n                        npm_package_version: '0.0.1'\n                    })\n                }\n            );\n        } else {\n            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']\n                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {\n                    // jslint-hack\n                    String(match0);\n                    switch (match1) {\n                    case 'npm_package_description':\n                        return 'the greatest app in the world!';\n                    case 'npm_package_name':\n                        return 'my-app';\n                    case 'npm_package_nameAlias':\n                        return 'my_app';\n                    case 'npm_package_version':\n                        return '0.0.1';\n                    }\n                });\n        }\n        // run the cli\n        if (local.global.utility2_rollup || module !== require.main) {\n            break;\n        }\n        local.assetsDict['/assets.example.js'] =\n            local.assetsDict['/assets.example.js'] ||\n            local.fs.readFileSync(__filename, 'utf8');\n        // bug-workaround - long $npm_package_buildCustomOrg\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.npmtest_phonegap_plugin_barcodescanner.rollup.js'] =\n            local.assetsDict['/assets.npmtest_phonegap_plugin_barcodescanner.rollup.js'] ||\n            local.fs.readFileSync(\n                local.npmtest_phonegap_plugin_barcodescanner.__dirname + '/lib.npmtest_phonegap_plugin_barcodescanner.js',\n                'utf8'\n            ).replace((/^#!/), '//');\n        /* jslint-ignore-end */\n        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';\n        // if $npm_config_timeout_exit exists,\n        // then exit this process after $npm_config_timeout_exit ms\n        if (Number(process.env.npm_config_timeout_exit)) {\n            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n        }\n        // start server\n        if (local.global.utility2_serverHttp1) {\n            break;\n        }\n        process.env.PORT = process.env.PORT || '8081';\n        console.error('server starting on port ' + process.env.PORT);\n        local.http.createServer(function (request, response) {\n            request.urlParsed = local.url.parse(request.url);\n            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n                response.end(local.assetsDict[request.urlParsed.pathname]);\n                return;\n            }\n            response.statusCode = 404;\n            response.end();\n        }).listen(process.env.PORT);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-phonegap-plugin-barcodescanner/node_modules/phonegap-plugin-barcodescanner/www/barcodescanner.js":"/**\n * cordova is available under *either* the terms of the modified BSD license *or* the\n * MIT License (2008). See http://opensource.org/licenses/alphabetical for full text.\n *\n * Copyright (c) Matt Kane 2010\n * Copyright (c) 2011, IBM Corporation\n */\n\n\n        var exec = cordova.require(\"cordova/exec\");\n\n        var scanInProgress = false;\n\n        /**\n         * Constructor.\n         *\n         * @returns {BarcodeScanner}\n         */\n        function BarcodeScanner() {\n\n            /**\n             * Encoding constants.\n             *\n             * @type Object\n             */\n            this.Encode = {\n                TEXT_TYPE: \"TEXT_TYPE\",\n                EMAIL_TYPE: \"EMAIL_TYPE\",\n                PHONE_TYPE: \"PHONE_TYPE\",\n                SMS_TYPE: \"SMS_TYPE\"\n                //  CONTACT_TYPE: \"CONTACT_TYPE\",  // TODO:  not implemented, requires passing a Bundle class from Javascript to Java\n                //  LOCATION_TYPE: \"LOCATION_TYPE\" // TODO:  not implemented, requires passing a Bundle class from Javascript to Java\n            };\n\n    /**\n     * Barcode format constants, defined in ZXing library.\n     *\n     * @type Object\n     */\n    this.format = {\n        \"all_1D\": 61918,\n        \"aztec\": 1,\n        \"codabar\": 2,\n        \"code_128\": 16,\n        \"code_39\": 4,\n        \"code_93\": 8,\n        \"data_MATRIX\": 32,\n        \"ean_13\": 128,\n        \"ean_8\": 64,\n        \"itf\": 256,\n        \"maxicode\": 512,\n        \"msi\": 131072,\n        \"pdf_417\": 1024,\n        \"plessey\": 262144,\n        \"qr_CODE\": 2048,\n        \"rss_14\": 4096,\n        \"rss_EXPANDED\": 8192,\n        \"upc_A\": 16384,\n        \"upc_E\": 32768,\n        \"upc_EAN_EXTENSION\": 65536\n        };\n  }\n\n/**\n * Read code from scanner.\n *\n * @param {Function} successCallback This function will recieve a result object: {\n         *        text : '12345-mock',    // The code that was scanned.\n         *        format : 'FORMAT_NAME', // Code format.\n         *        cancelled : true/false, // Was canceled.\n         *    }\n * @param {Function} errorCallback\n * @param config\n */\nBarcodeScanner.prototype.scan = function (successCallback, errorCallback, config) {\n\n            if (config instanceof Array) {\n                // do nothing\n            } else {\n                if (typeof(config) === 'object') {\n                    config = [ config ];\n                } else {\n                    config = [];\n                }\n            }\n\n            if (errorCallback == null) {\n                errorCallback = function () {\n                };\n            }\n\n            if (typeof errorCallback != \"function\") {\n                console.log(\"BarcodeScanner.scan failure: failure parameter not a function\");\n                return;\n            }\n\n            if (typeof successCallback != \"function\") {\n                console.log(\"BarcodeScanner.scan failure: success callback parameter must be a function\");\n                return;\n            }\n\n            if (scanInProgress) {\n                errorCallback('Scan is already in progress');\n                return;\n            }\n\n            scanInProgress = true;\n\n            exec(\n                function(result) {\n                    scanInProgress = false;\n                    successCallback(result);\n                },\n                function(error) {\n                    scanInProgress = false;\n                    errorCallback(error);\n                },\n                'BarcodeScanner',\n                'scan',\n                config\n            );\n        };\n\n        //-------------------------------------------------------------------\n        BarcodeScanner.prototype.encode = function (type, data, successCallback, errorCallback, options) {\n            if (errorCallback == null) {\n                errorCallback = function () {\n                };\n            }\n\n            if (typeof errorCallback != \"function\") {\n                console.log(\"BarcodeScanner.encode failure: failure parameter not a function\");\n                return;\n            }\n\n            if (typeof successCallback != \"function\") {\n                console.log(\"BarcodeScanner.encode failure: success callback parameter must be a function\");\n                return;\n            }\n\n            exec(successCallback, errorCallback, 'BarcodeScanner', 'encode', [\n                {\"type\": type, \"data\": data, \"options\": options}\n            ]);\n        };\n\n        var barcodeScanner = new BarcodeScanner();\n        module.exports = barcodeScanner;\n","/home/travis/build/npmtest/node-npmtest-phonegap-plugin-barcodescanner/node_modules/phonegap-plugin-barcodescanner/hooks/windows/check-arch.js":"module.exports = function(ctx) {\n    if (ctx.opts && ctx.opts.platforms && ctx.opts.platforms.indexOf('windows') > -1\n        && ctx.opts.options) {\n        var path = require('path');\n        var shell = ctx.requireCordovaModule('shelljs');\n        var nopt = ctx.requireCordovaModule('nopt');\n\n        // parse and validate args\n        var args = nopt({\n            'archs': [String],\n            'appx': String,\n            'phone': Boolean,\n            'win': Boolean,\n            'bundle': Boolean,\n            'packageCertificateKeyFile': String,\n            'packageThumbprint': String,\n            'publisherId': String,\n            'buildConfig': String\n        }, {}, ctx.opts.options.argv, 0);\n\n        // Check if --appx flag is passed so that we have a project build version override:  \n        var isWin10 = args.appx && args.appx.toLowerCase() === 'uap';\n\n        // Else check \"windows-target-version\" preference:\n        if (!isWin10) {\n            var configXml = shell.ls(path.join(ctx.opts.projectRoot, 'config.xml'))[0];\n\n            var reTargetVersion = /<preference\\s+name=\"windows-target-version\"\\s+value=\"(.+)\"\\s*\\/>/i;\n            var targetVersion = shell.grep(reTargetVersion, configXml);\n\n            var result = reTargetVersion.exec(targetVersion);\n            if (result !== null) {\n                var match = result[1];\n                isWin10 = parseInt(match.split('.'), 10) > 8;\n            }\n        }\n\n        // Non-AnyCPU arch is required for Windows 10 (UWP) projects only:\n        if (isWin10) {\n            var rawArchs = ctx.opts.options.archs || args.archs;\n            var archs = rawArchs ? rawArchs.split(' ') : [];\n\n            // Avoid \"anycpu\" arch:\n            if (archs.length === 0 || archs.some(function (item) {\n                return item.toLowerCase() === 'anycpu';\n            })) {\n                throw new Error('You must specify an architecture to include the proper ZXing library version.'\n                + '\\nUse \\'cordova run windows -- --arch=\"x64\"\\' or \\'cordova run windows -- --arch=\"arm\" --phone --device\\' for example.');\n            }\n        }\n    }\n}\n","/home/travis/build/npmtest/node-npmtest-phonegap-plugin-barcodescanner/node_modules/phonegap-plugin-barcodescanner/src/blackberry10/index.js":"/*\n* Copyright 2013-2015 BlackBerry Limited.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n* http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\nvar barcodescanner,\n\tresultObjs = {},\n\treadCallback,\n\t_utils = require(\"../../lib/utils\"),\n\t_qr = require('plugin/BarcodeScanner/qrcode.js');\n\nconst SMS_URI_ONE = \"smsto:\",\n\t  SMS_URI_TWO = \"sms:\",\n\t  EMAIL_URI = \"mailto:\",\n\t  PHONE_URI = \"tel:+1\",\n\t  SMS_TYPE = \"SMS_TYPE\",\n\t  PHONE_TYPE = \"PHONE_TYPE\",\n\t  EMAIL_TYPE = \"EMAIL_TYPE\",\n\t  TEXT_TYPE = \"TEXT_TYPE\";\n\nmodule.exports = {\n\n\t// methods to start and stop scanning\n\tscan: function (success, fail, args, env) {\n\t\tvar result = new PluginResult(args, env);\n\t\tresultObjs[result.callbackId] = result;\n\t\treadCallback = result.callbackId;\n\t\tvar views = qnx.webplatform.getWebViews();\n\t\tvar handle = null;\n\t\tvar group = null;\n\t\tvar z = -1;\n\t\tfor (var i = 0; i < views.length; i++) {\n\t\t\tif (views[i].visible && views[i].zOrder > z){\n\t\t\t\tz = views[i].zOrder;\n\t\t\t\tgroup = views[i].windowGroup;\n\t\t\t\thandle = views[i].jsScreenWindowHandle;\n\t\t\t}\n\t\t}\n\t\tif (handle !== null) {\n\t\t\tvar values = { group: group, handle: handle };\n\t\t\tbarcodescanner.getInstance().startRead(result.callbackId, values);\n\t\t\tresult.noResult(true);\n\t\t} else {\n\t\t\tresult.error(\"Failed to find window handle\", false);\n\t\t}\n\t},\n\n\t/*\n\tMethod for barcode encoding. Returns base 64 image URI \n\tCurrently only creates QRcodes\n\t*/\n\tencode: function (success, fail, args, env) {\n\t\t\n\t\tvar result = new PluginResult(args, env);\n\t\tvalues = decodeURIComponent(args[0]);\n\t\tvalues = JSON.parse(values);\n\t\tdata = values[\"data\"];\n\t\ttype = values[\"type\"];\n\t\n\t\tif(data == \"\" || data == undefined){\n\t\t\tresult.error(\"Data to be encoded was not specified\", false);\n\t\t\treturn;\n\t\t}\n\t\tif(type == \"\" || type == undefined){\n\t\t\ttype = TEXT_TYPE;\n\t\t}\n\n\t\tif(type == SMS_TYPE){\n\t\t\tvar check_one = data.substring(0,6).toLowerCase();\n\t\t\tvar check_two = data.substring(0,4).toLowerCase();\n\t\t\tif(!(check_one == SMS_URI_ONE || check_two == SMS_URI_TWO)){\n\t\t\t\tdata = SMS_URI_ONE+data;\n\t\t\t} \n\t\t}else if(type == EMAIL_TYPE){\n\t\t\tvar check = data.substring(0,7).toLowerCase();\n\t\t\tif(check != EMAIL_URI){\n\t\t\t\tdata = EMAIL_URI+data;\n\t\t\t} \n\t\t}else if(type == PHONE_TYPE){\n\t\t\tvar check = data.substring(0,4).toLowerCase();\n\t\t\tif(check != PHONE_URI){\n\t\t\t\tdata = PHONE_URI+data;\n\t\t\t} \n\t\t}\n\n\t\tconsole.log(\"Type: \"+type + \" Data: \" + data);\n\n\t\t//Make QRcode using qrcode.js \n\t\tvar bdiv = document.createElement('div');\n\t\tvar options = {\n\t    \ttext: data,\n\t   \t\twidth: 256,\n\t    \theight: 256,\n\t    \tcolorDark : \"#000000\",\n\t    \tcolorLight : \"#ffffff\",\n\t\t};\n\n\t\tvar imageURI = _qr.makeQRcode(bdiv, options);\n\n\t\ttry{\n\t\t\tresult.ok(imageURI,false);\n\t\t}catch(e){\n\t\t\tresult.error(\"Failed to encode barcode\", false);\n\t\t}\n\t}\n};\n\n\nJNEXT.BarcodeScanner = function () {\n\tvar self = this,\n\t\thasInstance = false;\n\n\tself.getId = function () {\n\t\treturn self.m_id;\n\t};\n\n\tself.init = function () {\n\t\tif (!JNEXT.require(\"libBarcodeScanner\")) {\n\t\t\treturn false;\n\t\t}\n\n\t\tself.m_id = JNEXT.createObject(\"libBarcodeScanner.BarcodeScannerJS\");\n\n\t\tif (self.m_id === \"\") {\n\t\t\treturn false;\n\t\t}\n\n\t\tJNEXT.registerEvents(self);\n\t};\n\n\t// ************************\n\t// Enter your methods here\n\t// ************************\n\n\t// Fired by the Event framework (used by asynchronous callbacks)\n\n\tself.onEvent = function (strData) {\n\t\tvar arData = strData.split(\" \"),\n\t\t\tcallbackId = arData[0],\n\t\t\treceivedEvent = arData[1],\n\t\t\tdata = arData[2],\n\t\t\tresult = resultObjs[callbackId],\n\t\t\tevents = [\"community.barcodescanner.codefound.native\",\n\t\t\t\t\t  \"community.barcodescanner.errorfound.native\",\n\t\t\t\t\t  \"community.barcodescanner.started.native\",\n\t\t\t\t\t  \"community.barcodescanner.ended.native\"];\n\t\t\t\n\t\t// Restructures results when codefound has spaces\t\t  \n\t\tif(arData.length > 3){\n\t\t\tvar i;\n\t\t\tfor(i=3; i<arData.length; i++) {\n\t\t\t\tdata += \" \" + arData[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (receivedEvent == \"community.barcodescanner.codefound.native\") {\n\t\t\tif (result) {\n\t\t\t\tvar parsed = JSON.parse(data);\n\t\t\t\tresult.callbackOk(parsed, false);\n\t\t\t}\n\t\t\tthis.stopRead(callbackId);\n\n\t\t}\n\t\tif (receivedEvent == \"community.barcodescanner.started.native\") {\n\t\t\tconsole.log(\"Scanning started successfully\");\n\t\t}\n\t\tif (receivedEvent == \"community.barcodescanner.errorfound.native\") {\n\t\t\tif (result) {\n\t\t\t\tresult.callbackError(data, false);\n\t\t\t}\n\t\t}\n\n\t\tif(receivedEvent == \"community.barcodescanner.ended.native\" || receivedEvent == \"community.barcodescanner.errorfound.native\") {\n\t\t\tdelete resultObjs[readCallback];\n\t\t\treadCallback = null;\n\t\t}\n\n\t};\n\n\t// Thread methods\n\tself.startRead = function (callbackId, handle) {\n\t\treturn JNEXT.invoke(self.m_id, \"startRead \" + callbackId + \" \" + JSON.stringify(handle));\n\t};\n\tself.stopRead = function (callbackId) {\n\t\treturn JNEXT.invoke(self.m_id, \"stopRead \" + callbackId);\n\t};\n\n\t// ************************\n\t// End of methods to edit\n\t// ************************\n\tself.m_id = \"\";\n\n\tself.getInstance = function () {\n\t\tif (!hasInstance) {\n\t\t\thasInstance = true;\n\t\t\tself.init();\n\t\t}\n\t\treturn self;\n\t};\n\n};\n\nbarcodescanner = new JNEXT.BarcodeScanner();","/home/travis/build/npmtest/node-npmtest-phonegap-plugin-barcodescanner/node_modules/phonegap-plugin-barcodescanner/src/blackberry10/qrcode.js":"/**\n * @fileoverview\n * - Using the 'QRCode for Javascript library'\n * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.\n * - this library has no dependencies.\n * \n * @author davidshimjs\n * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">http://www.d-project.com/</a>\n * @see <a href=\"http://jeromeetienne.github.com/jquery-qrcode/\" target=\"_blank\">http://jeromeetienne.github.com/jquery-qrcode/</a>\n */\nvar QRCode;\n//var _utils = require(\"../../lib/utils\");\n\n(function () {\n\t//---------------------------------------------------------------------\n\t// QRCode for JavaScript\n\t//\n\t// Copyright (c) 2009 Kazuhiko Arase\n\t//\n\t// URL: http://www.d-project.com/\n\t//\n\t// Licensed under the MIT license:\n\t//   http://www.opensource.org/licenses/mit-license.php\n\t//\n\t// The word \"QR Code\" is registered trademark of \n\t// DENSO WAVE INCORPORATED\n\t//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n\t//\n\t//---------------------------------------------------------------------\n\tfunction QR8bitByte(data) {\n\t\tthis.mode = QRMode.MODE_8BIT_BYTE;\n\t\tthis.data = data;\n\t\tthis.parsedData = [];\n\n\t\t// Added to support UTF-8 Characters\n\t\tfor (var i = 0, l = this.data.length; i < l; i++) {\n\t\t\tvar byteArray = [];\n\t\t\tvar code = this.data.charCodeAt(i);\n\n\t\t\tif (code > 0x10000) {\n\t\t\t\tbyteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\n\t\t\t\tbyteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\n\t\t\t\tbyteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\n\t\t\t\tbyteArray[3] = 0x80 | (code & 0x3F);\n\t\t\t} else if (code > 0x800) {\n\t\t\t\tbyteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\n\t\t\t\tbyteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\n\t\t\t\tbyteArray[2] = 0x80 | (code & 0x3F);\n\t\t\t} else if (code > 0x80) {\n\t\t\t\tbyteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\n\t\t\t\tbyteArray[1] = 0x80 | (code & 0x3F);\n\t\t\t} else {\n\t\t\t\tbyteArray[0] = code;\n\t\t\t}\n\n\t\t\tthis.parsedData.push(byteArray);\n\t\t}\n\n\t\tthis.parsedData = Array.prototype.concat.apply([], this.parsedData);\n\n\t\tif (this.parsedData.length != this.data.length) {\n\t\t\tthis.parsedData.unshift(191);\n\t\t\tthis.parsedData.unshift(187);\n\t\t\tthis.parsedData.unshift(239);\n\t\t}\n\t}\n\n\tQR8bitByte.prototype = {\n\t\tgetLength: function (buffer) {\n\t\t\treturn this.parsedData.length;\n\t\t},\n\t\twrite: function (buffer) {\n\t\t\tfor (var i = 0, l = this.parsedData.length; i < l; i++) {\n\t\t\t\tbuffer.put(this.parsedData[i], 8);\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction QRCodeModel(typeNumber, errorCorrectLevel) {\n\t\tthis.typeNumber = typeNumber;\n\t\tthis.errorCorrectLevel = errorCorrectLevel;\n\t\tthis.modules = null;\n\t\tthis.moduleCount = 0;\n\t\tthis.dataCache = null;\n\t\tthis.dataList = [];\n\t}\n\n\tQRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null;},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+\",\"+col);}\n\treturn this.modules[row][col];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(false,this.getBestMaskPattern());},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null;}}\n\tthis.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test);}\n\tif(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);}\n\tthis.mapData(this.dataCache,maskPattern);},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i;}}\n\treturn pattern;},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill();}}}\n\treturn qr_mc;},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue;}\n\tthis.modules[r][6]=(r%2==0);}\n\tfor(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue;}\n\tthis.modules[6][c]=(c%2==0);}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue;}\n\tfor(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;}\n\tfor(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod;}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod;}else if(i<8){this.modules[i+1][8]=mod;}else{this.modules[this.moduleCount-15+i][8]=mod;}}\n\tfor(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod;}else if(i<9){this.modules[8][15-i-1+1]=mod;}else{this.modules[8][15-i-1]=mod;}}\n\tthis.modules[this.moduleCount-8][8]=(!test);},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1);}\n\tvar mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark;}\n\tthis.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7;}}}\n\trow+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break;}}}}};QRCodeModel.PAD0=0xEC;QRCodeModel.PAD1=0x11;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer);}\n\tvar totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount;}\n\tif(buffer.getLengthInBits()>totalDataCount*8){throw new Error(\"code length overflow. (\"\n\t+buffer.getLengthInBits()\n\t+\">\"\n\t+totalDataCount*8\n\t+\")\");}\n\tif(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4);}\n\twhile(buffer.getLengthInBits()%8!=0){buffer.putBit(false);}\n\twhile(true){if(buffer.getLengthInBits()>=totalDataCount*8){break;}\n\tbuffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break;}\n\tbuffer.put(QRCodeModel.PAD1,8);}\n\treturn QRCodeModel.createBytes(buffer,rsBlocks);};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=0xff&buffer.buffer[i+offset];}\n\toffset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0;}}\n\tvar totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount;}\n\tvar data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i];}}}\n\tfor(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i];}}}\n\treturn data;};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));}\n\treturn((data<<10)|d)^QRUtil.G15_MASK;},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));}\n\treturn(data<<12)|d;},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1;}\n\treturn digit;},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1];},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error(\"bad maskPattern:\"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));}\n\treturn a;},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error(\"mode:\"+mode);}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error(\"mode:\"+mode);}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error(\"mode:\"+mode);}}else{throw new Error(\"type:\"+type);}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue;}\n\tfor(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue;}\n\tif(r==0&&c==0){continue;}\n\tif(dark==qrCode.isDark(row+r,col+c)){sameCount++;}}}\n\tif(sameCount>5){lostPoint+=(3+sameCount-5);}}}\n\tfor(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3;}}}\n\tfor(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40;}}}\n\tfor(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40;}}}\n\tvar darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++;}}}\n\tvar ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint;}};var QRMath={glog:function(n){if(n<1){throw new Error(\"glog(\"+n+\")\");}\n\treturn QRMath.LOG_TABLE[n];},gexp:function(n){while(n<0){n+=255;}\n\twhile(n>=256){n-=255;}\n\treturn QRMath.EXP_TABLE[n];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i;}\n\tfor(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];}\n\tfor(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;}\n\tfunction QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+\"/\"+shift);}\n\tvar offset=0;while(offset<num.length&&num[offset]==0){offset++;}\n\tthis.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset];}}\n\tQRPolynomial.prototype={get:function(index){return this.num[index];},getLength:function(){return this.num.length;},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));}}\n\treturn new QRPolynomial(num,0);},mod:function(e){if(this.getLength()-e.getLength()<0){return this;}\n\tvar ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i);}\n\tfor(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);}\n\treturn new QRPolynomial(num,0).mod(e);}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount;}\n\tQRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error(\"bad rs block @ typeNumber:\"+typeNumber+\"/errorCorrectLevel:\"+errorCorrectLevel);}\n\tvar length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount));}}\n\treturn list;};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined;}};function QRBitBuffer(){this.buffer=[];this.length=0;}\n\tQRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1;},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1);}},getLengthInBits:function(){return this.length;},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0);}\n\tif(bit){this.buffer[bufIndex]|=(0x80>>>(this.length%8));}\n\tthis.length++;}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];\n\t\n\tfunction _isSupportCanvas() {\n\t\treturn typeof CanvasRenderingContext2D != \"undefined\";\n\t}\n\t\n\t// android 2.x doesn't support Data-URI spec\n\tfunction _getAndroid() {\n\t\tvar android = false;\n\t\tvar sAgent = navigator.userAgent;\n\t\t\n\t\tif (/android/i.test(sAgent)) { // android\n\t\t\tandroid = true;\n\t\t\tvar aMat = sAgent.toString().match(/android ([0-9]\\.[0-9])/i);\n\t\t\t\n\t\t\tif (aMat && aMat[1]) {\n\t\t\t\tandroid = parseFloat(aMat[1]);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn android;\n\t}\n\t\n\tvar svgDrawer = (function() {\n\n\t\tvar Drawing = function (el, htOption) {\n\t\t\tthis._el = el;\n\t\t\tthis._htOption = htOption;\n\t\t};\n\n\t\tDrawing.prototype.draw = function (oQRCode) {\n\t\t\tvar _htOption = this._htOption;\n\t\t\tvar _el = this._el;\n\t\t\tvar nCount = oQRCode.getModuleCount();\n\t\t\tvar nWidth = Math.floor(_htOption.width / nCount);\n\t\t\tvar nHeight = Math.floor(_htOption.height / nCount);\n\n\t\t\tthis.clear();\n\n\t\t\tfunction makeSVG(tag, attrs) {\n\t\t\t\tvar el = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\t\t\t\tfor (var k in attrs)\n\t\t\t\t\tif (attrs.hasOwnProperty(k)) el.setAttribute(k, attrs[k]);\n\t\t\t\treturn el;\n\t\t\t}\n\n\t\t\tvar svg = makeSVG(\"svg\" , {'viewBox': '0 0 ' + String(nCount) + \" \" + String(nCount), 'width': '100%', 'height': '100%', 'fill': _htOption.colorLight});\n\t\t\tsvg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n\t\t\t_el.appendChild(svg);\n\n\t\t\tsvg.appendChild(makeSVG(\"rect\", {\"fill\": _htOption.colorLight, \"width\": \"100%\", \"height\": \"100%\"}));\n\t\t\tsvg.appendChild(makeSVG(\"rect\", {\"fill\": _htOption.colorDark, \"width\": \"1\", \"height\": \"1\", \"id\": \"template\"}));\n\n\t\t\tfor (var row = 0; row < nCount; row++) {\n\t\t\t\tfor (var col = 0; col < nCount; col++) {\n\t\t\t\t\tif (oQRCode.isDark(row, col)) {\n\t\t\t\t\t\tvar child = makeSVG(\"use\", {\"x\": String(col), \"y\": String(row)});\n\t\t\t\t\t\tchild.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", \"#template\");\n\t\t\t\t\t\tsvg.appendChild(child);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tDrawing.prototype.clear = function () {\n\t\t\twhile (this._el.hasChildNodes())\n\t\t\t\tthis._el.removeChild(this._el.lastChild);\n\t\t};\n\t\treturn Drawing;\n\t})();\n\n\tvar useSVG = document.documentElement.tagName.toLowerCase() === \"svg\";\n\n\t// Drawing in DOM by using Table tag\n\tvar Drawing = useSVG ? svgDrawer : !_isSupportCanvas() ? (function () {\n\t\tvar Drawing = function (el, htOption) {\n\t\t\tthis._el = el;\n\t\t\tthis._htOption = htOption;\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Draw the QRCode\n\t\t * \n\t\t * @param {QRCode} oQRCode\n\t\t */\n\t\tDrawing.prototype.draw = function (oQRCode) {\n            var _htOption = this._htOption;\n            var _el = this._el;\n\t\t\tvar nCount = oQRCode.getModuleCount();\n\t\t\tvar nWidth = Math.floor(_htOption.width / nCount);\n\t\t\tvar nHeight = Math.floor(_htOption.height / nCount);\n\t\t\tvar aHTML = ['<table style=\"border:0;border-collapse:collapse;\">'];\n\t\t\t\n\t\t\tfor (var row = 0; row < nCount; row++) {\n\t\t\t\taHTML.push('<tr>');\n\t\t\t\t\n\t\t\t\tfor (var col = 0; col < nCount; col++) {\n\t\t\t\t\taHTML.push('<td style=\"border:0;border-collapse:collapse;padding:0;margin:0;width:' + nWidth + 'px;height:' + nHeight + 'px;background-color:' + (oQRCode.isDark(row, col) ? _htOption.colorDark : _htOption.colorLight) + ';\"></td>');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\taHTML.push('</tr>');\n\t\t\t}\n\t\t\t\n\t\t\taHTML.push('</table>');\n\t\t\t_el.innerHTML = aHTML.join('');\n\t\t\t\n\t\t\t// Fix the margin values as real size.\n\t\t\tvar elTable = _el.childNodes[0];\n\t\t\tvar nLeftMarginTable = (_htOption.width - elTable.offsetWidth) / 2;\n\t\t\tvar nTopMarginTable = (_htOption.height - elTable.offsetHeight) / 2;\n\t\t\t\n\t\t\tif (nLeftMarginTable > 0 && nTopMarginTable > 0) {\n\t\t\t\telTable.style.margin = nTopMarginTable + \"px \" + nLeftMarginTable + \"px\";\t\n\t\t\t}\n\t\t};\n\t\t\n\t\t/**\n\t\t * Clear the QRCode\n\t\t */\n\t\tDrawing.prototype.clear = function () {\n\t\t\tthis._el.innerHTML = '';\n\t\t};\n\t\t\n\t\treturn Drawing;\n\t})() : (function () { // Drawing in Canvas\n\t\tfunction _onMakeImage() {\n\t\t\tthis._elImage.src = this._elCanvas.toDataURL(\"image/png\");\n\t\t\tthis._elImage.style.display = \"block\";\n\t\t\tthis._elCanvas.style.display = \"none\";\t\t\t\n\t\t}\n\t\t\n\t\t// Android 2.1 bug workaround\n\t\t// http://code.google.com/p/android/issues/detail?id=5141\n\t\tif (this._android && this._android <= 2.1) {\n\t    \tvar factor = 1 / window.devicePixelRatio;\n\t        var drawImage = CanvasRenderingContext2D.prototype.drawImage; \n\t    \tCanvasRenderingContext2D.prototype.drawImage = function (image, sx, sy, sw, sh, dx, dy, dw, dh) {\n\t    \t\tif ((\"nodeName\" in image) && /img/i.test(image.nodeName)) {\n\t\t        \tfor (var i = arguments.length - 1; i >= 1; i--) {\n\t\t            \targuments[i] = arguments[i] * factor;\n\t\t        \t}\n\t    \t\t} else if (typeof dw == \"undefined\") {\n\t    \t\t\targuments[1] *= factor;\n\t    \t\t\targuments[2] *= factor;\n\t    \t\t\targuments[3] *= factor;\n\t    \t\t\targuments[4] *= factor;\n\t    \t\t}\n\t    \t\t\n\t        \tdrawImage.apply(this, arguments); \n\t    \t};\n\t\t}\n\t\t\n\t\t/**\n\t\t * Check whether the user's browser supports Data URI or not\n\t\t * \n\t\t * @private\n\t\t * @param {Function} fSuccess Occurs if it supports Data URI\n\t\t * @param {Function} fFail Occurs if it doesn't support Data URI\n\t\t */\n\t\tfunction _safeSetDataURI(fSuccess, fFail) {\n            var self = this;\n            self._fFail = fFail;\n            self._fSuccess = fSuccess;\n\n            // Check it just once\n            if (self._bSupportDataURI === null) {\n                var el = document.createElement(\"img\");\n                var fOnError = function() {\n                    self._bSupportDataURI = false;\n\n                    if (self._fFail) {\n                        self._fFail.call(self);\n                    }\n                };\n                var fOnSuccess = function() {\n                    self._bSupportDataURI = true;\n\n                    if (self._fSuccess) {\n                        self._fSuccess.call(self);\n                    }\n                };\n\n                el.onabort = fOnError;\n                el.onerror = fOnError;\n                el.onload = fOnSuccess;\n                el.src = \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\n                return;\n            } else if (self._bSupportDataURI === true && self._fSuccess) {\n                self._fSuccess.call(self);\n            } else if (self._bSupportDataURI === false && self._fFail) {\n                self._fFail.call(self);\n            }\n\t\t};\n\t\t\n\t\t/**\n\t\t * Drawing QRCode by using canvas\n\t\t * \n\t\t * @constructor\n\t\t * @param {HTMLElement} el\n\t\t * @param {Object} htOption QRCode Options \n\t\t */\n\t\tvar Drawing = function (el, htOption) {\n    \t\tthis._bIsPainted = false;\n    \t\tthis._android = _getAndroid();\n\t\t\n\t\t\tthis._htOption = htOption;\n\t\t\tthis._elCanvas = document.createElement(\"canvas\");\n\t\t\tthis._elCanvas.width = htOption.width;\n\t\t\tthis._elCanvas.height = htOption.height;\n\t\t\tel.appendChild(this._elCanvas);\n\t\t\tthis._el = el;\n\t\t\tthis._oContext = this._elCanvas.getContext(\"2d\");\n\t\t\tthis._bIsPainted = false;\n\t\t\tthis._elImage = document.createElement(\"img\");\n\t\t\tthis._elImage.alt = \"Scan me!\";\n\t\t\tthis._elImage.style.display = \"none\";\n\t\t\tthis._el.appendChild(this._elImage);\n\t\t\tthis._bSupportDataURI = null;\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Draw the QRCode\n\t\t * \n\t\t * @param {QRCode} oQRCode \n\t\t */\n\t\tDrawing.prototype.draw = function (oQRCode) {\n            var _elImage = this._elImage;\n            var _oContext = this._oContext;\n            var _htOption = this._htOption;\n            \n\t\t\tvar nCount = oQRCode.getModuleCount();\n\t\t\tvar nWidth = _htOption.width / nCount;\n\t\t\tvar nHeight = _htOption.height / nCount;\n\t\t\tvar nRoundedWidth = Math.round(nWidth);\n\t\t\tvar nRoundedHeight = Math.round(nHeight);\n\n\t\t\t_elImage.style.display = \"none\";\n\t\t\tthis.clear();\n\t\t\t\n\t\t\tfor (var row = 0; row < nCount; row++) {\n\t\t\t\tfor (var col = 0; col < nCount; col++) {\n\t\t\t\t\tvar bIsDark = oQRCode.isDark(row, col);\n\t\t\t\t\tvar nLeft = col * nWidth;\n\t\t\t\t\tvar nTop = row * nHeight;\n\t\t\t\t\t_oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\n\t\t\t\t\t_oContext.lineWidth = 1;\n\t\t\t\t\t_oContext.fillStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\t\t\t\t\t\n\t\t\t\t\t_oContext.fillRect(nLeft, nTop, nWidth, nHeight);\n\t\t\t\t\t\n\t\t\t\t\t//    \n\t\t\t\t\t_oContext.strokeRect(\n\t\t\t\t\t\tMath.floor(nLeft) + 0.5,\n\t\t\t\t\t\tMath.floor(nTop) + 0.5,\n\t\t\t\t\t\tnRoundedWidth,\n\t\t\t\t\t\tnRoundedHeight\n\t\t\t\t\t);\n\t\t\t\t\t\n\t\t\t\t\t_oContext.strokeRect(\n\t\t\t\t\t\tMath.ceil(nLeft) - 0.5,\n\t\t\t\t\t\tMath.ceil(nTop) - 0.5,\n\t\t\t\t\t\tnRoundedWidth,\n\t\t\t\t\t\tnRoundedHeight\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._bIsPainted = true;\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Make the image from Canvas if the browser supports Data URI.\n\t\t */\n\t\tDrawing.prototype.makeImage = function () {\n\t\t\tif (this._bIsPainted) {\n\t\t\t\t_safeSetDataURI.call(this, _onMakeImage);\n\t\t\t}\n\t\t};\n\t\t\t\n\t\t/**\n\t\t * Return whether the QRCode is painted or not\n\t\t * \n\t\t * @return {Boolean}\n\t\t */\n\t\tDrawing.prototype.isPainted = function () {\n\t\t\treturn this._bIsPainted;\n\t\t};\n\t\t\n\t\t/**\n\t\t * Clear the QRCode\n\t\t */\n\t\tDrawing.prototype.clear = function () {\n\t\t\tthis._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\n\t\t\tthis._bIsPainted = false;\n\t\t};\n\t\t\n\t\t/**\n\t\t * @private\n\t\t * @param {Number} nNumber\n\t\t */\n\t\tDrawing.prototype.round = function (nNumber) {\n\t\t\tif (!nNumber) {\n\t\t\t\treturn nNumber;\n\t\t\t}\n\t\t\t\n\t\t\treturn Math.floor(nNumber * 1000) / 1000;\n\t\t};\n\t\t\n\t\treturn Drawing;\n\t})();\n\t\n\t/**\n\t * Get the type by string length\n\t * \n\t * @private\n\t * @param {String} sText\n\t * @param {Number} nCorrectLevel\n\t * @return {Number} type\n\t */\n\tfunction _getTypeNumber(sText, nCorrectLevel) {\t\t\t\n\t\tvar nType = 1;\n\t\tvar length = _getUTF8Length(sText);\n\t\t\n\t\tfor (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n\t\t\tvar nLimit = 0;\n\t\t\t\n\t\t\tswitch (nCorrectLevel) {\n\t\t\t\tcase QRErrorCorrectLevel.L :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][0];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.M :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][1];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.Q :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][2];\n\t\t\t\t\tbreak;\n\t\t\t\tcase QRErrorCorrectLevel.H :\n\t\t\t\t\tnLimit = QRCodeLimitLength[i][3];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tif (length <= nLimit) {\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tnType++;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (nType > QRCodeLimitLength.length) {\n\t\t\tthrow new Error(\"Too long data\");\n\t\t}\n\t\t\n\t\treturn nType;\n\t}\n\n\tfunction _getUTF8Length(sText) {\n\t\tvar replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\n\t\treturn replacedText.length + (replacedText.length != sText ? 3 : 0);\n\t}\n\t\n\t/**\n\t * @class QRCode\n\t * @constructor\n\t * @example \n\t * new QRCode(document.getElementById(\"test\"), \"http://jindo.dev.naver.com/collie\");\n\t *\n\t * @example\n\t * var oQRCode = new QRCode(\"test\", {\n\t *    text : \"http://naver.com\",\n\t *    width : 128,\n\t *    height : 128\n\t * });\n\t * \n\t * oQRCode.clear(); // Clear the QRCode.\n\t * oQRCode.makeCode(\"http://map.naver.com\"); // Re-create the QRCode.\n\t *\n\t * @param {HTMLElement|String} el target element or 'id' attribute of element.\n\t * @param {Object|String} vOption\n\t * @param {String} vOption.text QRCode link data\n\t * @param {Number} [vOption.width=256]\n\t * @param {Number} [vOption.height=256]\n\t * @param {String} [vOption.colorDark=\"#000000\"]\n\t * @param {String} [vOption.colorLight=\"#ffffff\"]\n\t * @param {QRCode.CorrectLevel} [vOption.correctLevel=QRCode.CorrectLevel.H] [L|M|Q|H] \n\t */\n\tQRCode = function (el, vOption) {\n\t\tthis._htOption = {\n\t\t\twidth : 256, \n\t\t\theight : 256,\n\t\t\ttypeNumber : 4,\n\t\t\tcolorDark : \"#000000\",\n\t\t\tcolorLight : \"#ffffff\",\n\t\t\tcorrectLevel : QRErrorCorrectLevel.H\n\t\t};\n\t\t\n\t\tif (typeof vOption === 'string') {\n\t\t\tvOption\t= {\n\t\t\t\ttext : vOption\n\t\t\t};\n\t\t}\n\t\t\n\t\t// Overwrites options\n\t\tif (vOption) {\n\t\t\tfor (var i in vOption) {\n\t\t\t\tthis._htOption[i] = vOption[i];\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (typeof el == \"string\") {\n\t\t\tel = document.getElementById(el);\n\t\t}\n\n\t\tif (this._htOption.useSVG) {\n\t\t\tDrawing = svgDrawer;\n\t\t}\n\t\t\n\t\tthis._android = _getAndroid();\n\t\tthis._el = el;\n\t\tthis._oQRCode = null;\n\t\tthis._oDrawing = new Drawing(this._el, this._htOption);\n\t\t\n\t\tif (this._htOption.text) {\n\t\t\tthis.makeCode(this._htOption.text);\t\n\t\t}\n\t};\n\t\n\t/**\n\t * Make the QRCode\n\t * \n\t * @param {String} sText link data\n\t */\n\tQRCode.prototype.makeCode = function (sText) {\n\t\tthis._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\n\t\tthis._oQRCode.addData(sText);\n\t\tthis._oQRCode.make();\n\t\tthis._el.title = sText;\n\t\tthis._oDrawing.draw(this._oQRCode);\t\t\t\n\t\tthis.makeImage();\n\t};\n\t\n\t/**\n\t * Make the Image from Canvas element\n\t * - It occurs automatically\n\t * - Android below 3 doesn't support Data-URI spec.\n\t * \n\t * @private\n\t */\n\tQRCode.prototype.makeImage = function () {\n\t\tif (typeof this._oDrawing.makeImage == \"function\" && (!this._android || this._android >= 3)) {\n\t\t\tthis._oDrawing.makeImage();\n\t\t}\n\t};\n\t\n\t/**\n\t * Clear the QRCode\n\t */\n\tQRCode.prototype.clear = function () {\n\t\tthis._oDrawing.clear();\n\t};\n\t\n\t/**\n\t * @name QRCode.CorrectLevel\n\t */\n\tQRCode.CorrectLevel = QRErrorCorrectLevel;\n\n\tmodule.exports = {\n\t\tmakeQRcode : function(el, vOption){\n\t\t\tvar qrcode = new QRCode(el, vOption);\n\t\t\treturn qrcode._oDrawing._elCanvas.toDataURL();\n\t\t}\n\t}\n})();\n","/home/travis/build/npmtest/node-npmtest-phonegap-plugin-barcodescanner/node_modules/phonegap-plugin-barcodescanner/src/browser/BarcodeScannerProxy.js":"function scan(success, error) {\n    var code = window.prompt(\"Enter barcode value (empty value will fire the error handler):\");\n    if(code) {\n        var result = {\n            text:code,\n            format:\"Fake\",\n            cancelled:false\n        };\n        success(result);\n    } else {\n        error(\"No barcode\");\n    }\n}\n\nfunction encode(type, data, success, errorCallback) {\n    success();\n}\n\nmodule.exports = {\n    scan: scan,\n    encode: encode\n};\n\nrequire(\"cordova/exec/proxy\").add(\"BarcodeScanner\",module.exports);","/home/travis/build/npmtest/node-npmtest-phonegap-plugin-barcodescanner/node_modules/phonegap-plugin-barcodescanner/src/windows/BarcodeScannerProxy.js":"/*\n * Copyright (c) Microsoft Open Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nvar urlutil = require('cordova/urlutil');\n\nvar CAMERA_STREAM_STATE_CHECK_RETRY_TIMEOUT = 200; // milliseconds\nvar OPERATION_IS_IN_PROGRESS = -2147024567;\nvar REGDB_E_CLASSNOTREG = -2147221164;\nvar INITIAL_FOCUS_DELAY = 200; // milliseconds\nvar CHECK_PLAYING_TIMEOUT = 100; // milliseconds\n\n/**\n * List of supported barcode formats from ZXing library. Used to return format\n *   name instead of number code as per plugin spec.\n *\n * @enum {String}\n */\nvar BARCODE_FORMAT = {\n    1: 'AZTEC',\n    2: 'CODABAR',\n    4: 'CODE_39',\n    8: 'CODE_93',\n    16: 'CODE_128',\n    32: 'DATA_MATRIX',\n    64: 'EAN_8',\n    128: 'EAN_13',\n    256: 'ITF',\n    512: 'MAXICODE',\n    1024: 'PDF_417',\n    2048: 'QR_CODE',\n    4096: 'RSS_14',\n    8192: 'RSS_EXPANDED',\n    16384: 'UPC_A',\n    32768: 'UPC_E',\n    61918: 'All_1D',\n    65536: 'UPC_EAN_EXTENSION',\n    131072: 'MSI',\n    262144: 'PLESSEY'\n};\n\n/**\n * Detects the first appropriate camera located at the back panel of device. If\n *   there is no back cameras, returns the first available.\n *\n * @returns {Promise<String>} Camera id\n */\nfunction findCamera() {\n    var Devices = Windows.Devices.Enumeration;\n\n    // Enumerate cameras and add them to the list\n    return Devices.DeviceInformation.findAllAsync(Devices.DeviceClass.videoCapture)\n    .then(function (cameras) {\n\n        if (!cameras || cameras.length === 0) {\n            throw new Error(\"No cameras found\");\n        }\n\n        var backCameras = cameras.filter(function (camera) {\n            return camera.enclosureLocation && camera.enclosureLocation.panel === Devices.Panel.back;\n        });\n\n        // If there is back cameras, return the id of the first,\n        // otherwise take the first available device's id\n        return (backCameras[0] || cameras[0]).id;\n    });\n}\n\n/**\n * @param {Windows.Graphics.Display.DisplayOrientations} displayOrientation\n * @return {Number}\n */\nfunction videoPreviewRotationLookup(displayOrientation, isMirrored) {\n    var degreesToRotate;\n\n    switch (displayOrientation) {\n        case Windows.Graphics.Display.DisplayOrientations.landscape:\n            degreesToRotate = 0;\n            break;\n        case Windows.Graphics.Display.DisplayOrientations.portrait:\n            if (isMirrored) {\n                degreesToRotate = 270;\n            } else {\n                degreesToRotate = 90;\n            }\n            break;\n        case Windows.Graphics.Display.DisplayOrientations.landscapeFlipped:\n            degreesToRotate = 180;\n            break;\n        case Windows.Graphics.Display.DisplayOrientations.portraitFlipped:\n            if (isMirrored) {\n                degreesToRotate = 90;\n            } else {\n                degreesToRotate = 270;\n            }\n            break;\n        default:\n            degreesToRotate = 0;\n            break;\n    }\n\n    return degreesToRotate;\n}\n\n/**\n * The pure JS implementation of barcode reader from WinRTBarcodeReader.winmd.\n *   Works only on Windows 10 devices and more efficient than original one.\n *\n * @class {BarcodeReader}\n */\nfunction BarcodeReader () {\n    this._promise = null;\n    this._cancelled = false;\n}\n\n/**\n * Returns an instance of Barcode reader, depending on capabilities of Media\n *   Capture API\n *\n * @static\n * @constructs {BarcodeReader}\n *\n * @param   {MediaCapture}   mediaCaptureInstance  Instance of\n *   Windows.Media.Capture.MediaCapture class\n *\n * @return  {BarcodeReader}  BarcodeReader instance that could be used for\n *   scanning\n */\nBarcodeReader.get = function (mediaCaptureInstance) {\n    if (mediaCaptureInstance.getPreviewFrameAsync && ZXing.BarcodeReader) {\n        return new BarcodeReader();\n    }\n\n    // If there is no corresponding API (Win8/8.1/Phone8.1) use old approach with WinMD library\n    return new WinRTBarcodeReader.Reader();\n\n};\n\n/**\n * Initializes instance of reader.\n *\n * @param   {MediaCapture}  capture  Instance of\n *   Windows.Media.Capture.MediaCapture class, used for acquiring images/ video\n *   stream for barcode scanner.\n * @param   {Number}  width    Video/image frame width\n * @param   {Number}  height   Video/image frame height\n */\nBarcodeReader.prototype.init = function (capture, width, height) {\n    this._capture = capture;\n    this._width = width;\n    this._height = height;\n    this._zxingReader = new ZXing.BarcodeReader();\n    this._zxingReader.tryHarder = true;\n};\n\n/**\n * Starts barcode search routines asyncronously.\n *\n * @return  {Promise<ScanResult>}  barcode scan result or null if search\n *   cancelled.\n */\nBarcodeReader.prototype.readCode = function () {\n\n    /**\n     * Grabs a frame from preview stream uning Win10-only API and tries to\n     *   get a barcode using zxing reader provided. If there is no barcode\n     *   found, returns null.\n     */\n    function scanBarcodeAsync(mediaCapture, zxingReader, frameWidth, frameHeight) {\n        // Shortcuts for namespaces\n        var Imaging = Windows.Graphics.Imaging;\n        var Streams = Windows.Storage.Streams;\n\n        var frame = new Windows.Media.VideoFrame(Imaging.BitmapPixelFormat.bgra8, frameWidth, frameHeight);\n        return mediaCapture.getPreviewFrameAsync(frame)\n        .then(function (capturedFrame) {\n\n            // Copy captured frame to buffer for further deserialization\n            var bitmap = capturedFrame.softwareBitmap;\n            var rawBuffer = new Streams.Buffer(bitmap.pixelWidth * bitmap.pixelHeight * 4);\n            capturedFrame.softwareBitmap.copyToBuffer(rawBuffer);\n            capturedFrame.close();\n\n            // Get raw pixel data from buffer\n            var data = new Uint8Array(rawBuffer.length);\n            var dataReader = Streams.DataReader.fromBuffer(rawBuffer);\n            dataReader.readBytes(data);\n            dataReader.close();\n\n            return zxingReader.decode(data, frameWidth, frameHeight, ZXing.BitmapFormat.bgra32);\n        });\n    }\n\n    var self = this;\n    return scanBarcodeAsync(this._capture, this._zxingReader, this._width, this._height)\n    .then(function (result) {\n        if (self._cancelled)\n            return null;\n\n        return result || (self._promise = self.readCode());\n    });\n};\n\n/**\n * Stops barcode search\n */\nBarcodeReader.prototype.stop = function () {\n    this._cancelled = true;\n};\n\nfunction degreesToRotation(degrees) {\n    switch (degrees) {\n        // portrait\n        case 90:\n            return Windows.Media.Capture.VideoRotation.clockwise90Degrees;\n        // landscape\n        case 0:\n            return Windows.Media.Capture.VideoRotation.none;\n        // portrait-flipped\n        case 270:\n            return Windows.Media.Capture.VideoRotation.clockwise270Degrees;\n        // landscape-flipped\n        case 180:\n            return Windows.Media.Capture.VideoRotation.clockwise180Degrees;\n        default:\n            // Falling back to portrait default\n            return Windows.Media.Capture.VideoRotation.clockwise90Degrees;\n    }\n}\n\nmodule.exports = {\n\n    /**\n     * Scans image via device camera and retieves barcode from it.\n     * @param  {function} success Success callback\n     * @param  {function} fail    Error callback\n     * @param  {array} args       Arguments array\n     */\n    scan: function (success, fail, args) {\n        var capturePreview,\n            capturePreviewAlignmentMark,\n            captureCancelButton,\n            navigationButtonsDiv,\n            previewMirroring,\n            closeButton,\n            capture,\n            reader;\n\n        // Save call state for suspend/resume\n        BarcodeReader.scanCallArgs = {\n            success: success,\n            fail: fail,\n            args: args\n        };\n\n        function updatePreviewForRotation(evt) {\n            if (!capture) {\n                return;\n            }\n\n            var displayInformation = (evt && evt.target) || Windows.Graphics.Display.DisplayInformation.getForCurrentView();\n            var currentOrientation = displayInformation.currentOrientation;\n\n            previewMirroring = capture.getPreviewMirroring();\n\n            // Lookup up the rotation degrees.\n            var rotDegree = videoPreviewRotationLookup(currentOrientation, previewMirroring);\n\n            capture.setPreviewRotation(degreesToRotation(rotDegree));\n            return WinJS.Promise.as();\n        }\n\n        /**\n         * Creates a preview frame and necessary objects\n         */\n        function createPreview() {\n\n            // Create fullscreen preview\n            var capturePreviewFrameStyle = document.createElement('link');\n            capturePreviewFrameStyle.rel = \"stylesheet\";\n            capturePreviewFrameStyle.type = \"text/css\";\n            capturePreviewFrameStyle.href = urlutil.makeAbsolute(\"/www/css/plugin-barcodeScanner.css\");\n\n            document.head.appendChild(capturePreviewFrameStyle);\n\n            capturePreviewFrame = document.createElement('div');\n            capturePreviewFrame.className = \"barcode-scanner-wrap\";\n\n            capturePreview = document.createElement(\"video\");\n            capturePreview.className = \"barcode-scanner-preview\";\n            capturePreview.addEventListener('click', function () {\n                focus();\n            });\n\n            capturePreviewAlignmentMark = document.createElement('div');\n            capturePreviewAlignmentMark.className = \"barcode-scanner-mark\";\n\n            navigationButtonsDiv = document.createElement(\"div\");\n            navigationButtonsDiv.className = \"barcode-scanner-app-bar\";\n            navigationButtonsDiv.onclick = function (e) {\n                e.cancelBubble = true;\n            };\n\n            closeButton = document.createElement(\"div\");\n            closeButton.innerText = \"close\";\n            closeButton.className = \"app-bar-action action-close\";\n            navigationButtonsDiv.appendChild(closeButton);\n\n            BarcodeReader.scanCancelled = false;\n            closeButton.addEventListener(\"click\", cancelPreview, false);\n            document.addEventListener('backbutton', cancelPreview, false);\n\n            [capturePreview, capturePreviewAlignmentMark, navigationButtonsDiv].forEach(function (element) {\n                capturePreviewFrame.appendChild(element);\n            });\n        }\n\n        function focus(controller) {\n\n            var result = WinJS.Promise.wrap();\n\n            if (!capturePreview || capturePreview.paused) {\n                // If the preview is not yet playing, there is no sense in running focus\n                return result;\n            }\n\n            if (!controller) {\n                try {\n                    controller = capture && capture.videoDeviceController;\n                } catch (err) {\n                    console.log('Failed to access focus control for current camera: ' + err);\n                    return result;\n                }\n            }\n\n            if (!controller.focusControl || !controller.focusControl.supported) {\n                console.log('Focus control for current camera is not supported');\n                return result;\n            }\n\n            // Multiple calls to focusAsync leads to internal focusing hang on some Windows Phone 8.1 devices\n            // Also need to wrap in try/catch to avoid crash on Surface 3 - looks like focusState property\n            // somehow is not accessible there. See https://github.com/phonegap/phonegap-plugin-barcodescanner/issues/288\n            try {\n                if (controller.focusControl.focusState === Windows.Media.Devices.MediaCaptureFocusState.searching) {\n                    return result;\n                }\n            } catch (e) {\n                // Nothing to do - just continue w/ focusing\n            }\n\n            // The delay prevents focus hang on slow devices\n            return WinJS.Promise.timeout(INITIAL_FOCUS_DELAY)\n            .then(function () {\n                try {\n                    return controller.focusControl.focusAsync().then(function () {\n                        return result;\n                    }, function (e) {\n                        // This happens on mutliple taps\n                        if (e.number !== OPERATION_IS_IN_PROGRESS) {\n                            console.error('focusAsync failed: ' + e);\n                            return WinJS.Promise.wrapError(e);\n                        }\n                        return result;\n                    });\n                } catch (e) {\n                    // This happens on mutliple taps\n                    if (e.number !== OPERATION_IS_IN_PROGRESS) {\n                        console.error('focusAsync failed: ' + e);\n                        return WinJS.Promise.wrapError(e);\n                    }\n                    return result;\n                }\n            });\n        }\n\n        function setupFocus(focusControl) {\n\n            function supportsFocusMode(mode) {\n                return focusControl.supportedFocusModes.indexOf(mode).returnValue;\n            }\n\n            if (!focusControl || !focusControl.supported || !focusControl.configure) {\n                return WinJS.Promise.wrap();\n            }\n\n            var FocusMode = Windows.Media.Devices.FocusMode;\n            var focusConfig = new Windows.Media.Devices.FocusSettings();\n            focusConfig.autoFocusRange = Windows.Media.Devices.AutoFocusRange.normal;\n\n            // Determine a focus position if the focus search fails:\n            focusConfig.disableDriverFallback = false;\n\n            if (supportsFocusMode(FocusMode.continuous)) {\n                console.log(\"Device supports continuous focus mode\");\n                focusConfig.mode = FocusMode.continuous;\n            } else if (supportsFocusMode(FocusMode.auto)) {\n                console.log(\"Device doesn\\'t support continuous focus mode, switching to autofocus mode\");\n                focusConfig.mode = FocusMode.auto;\n            }\n\n            focusControl.configure(focusConfig);\n\n            // Continuous focus should start only after preview has started. See 'Remarks' at\n            // https://msdn.microsoft.com/en-us/library/windows/apps/windows.media.devices.focuscontrol.configure.aspx\n            function waitForIsPlaying() {\n                var isPlaying = !capturePreview.paused && !capturePreview.ended && capturePreview.readyState > 2;\n\n                if (!isPlaying) {\n                    return WinJS.Promise.timeout(CHECK_PLAYING_TIMEOUT)\n                    .then(function () {\n                        return waitForIsPlaying();\n                    });\n                }\n\n                return focus();\n            }\n\n            return waitForIsPlaying();\n        }\n\n        function disableZoomAndScroll() {\n            document.body.classList.add('no-zoom');\n            document.body.classList.add('no-scroll');\n        }\n\n        function enableZoomAndScroll() {\n            document.body.classList.remove('no-zoom');\n            document.body.classList.remove('no-scroll');\n        }\n\n        /**\n         * Starts stream transmission to preview frame and then run barcode search\n         */\n        function startPreview() {\n            return findCamera()\n            .then(function (id) {\n                var captureSettings;\n\n                try {\n                    captureSettings = new Windows.Media.Capture.MediaCaptureInitializationSettings();\n                } catch (e) {\n                    if (e.number === REGDB_E_CLASSNOTREG) {\n                        throw new Error('Ensure that you have Windows Media Player and Media Feature pack installed.');\n                    }\n\n                    throw e;\n                }\n\n                captureSettings.streamingCaptureMode = Windows.Media.Capture.StreamingCaptureMode.video;\n                captureSettings.photoCaptureSource = Windows.Media.Capture.PhotoCaptureSource.videoPreview;\n                captureSettings.videoDeviceId = id;\n\n                capture = new Windows.Media.Capture.MediaCapture();\n                return capture.initializeAsync(captureSettings);\n            })\n            .then(function () {\n\n                var controller = capture.videoDeviceController;\n                var deviceProps = controller.getAvailableMediaStreamProperties(Windows.Media.Capture.MediaStreamType.videoPreview);\n\n                deviceProps = Array.prototype.slice.call(deviceProps);\n                deviceProps = deviceProps.filter(function (prop) {\n                    // filter out streams with \"unknown\" subtype - causes errors on some devices\n                    return prop.subtype !== \"Unknown\";\n                }).sort(function (propA, propB) {\n                    // sort properties by resolution\n                    return propB.width - propA.width;\n                });\n\n                var preferredProps = deviceProps.filter(function(prop){\n                    // Filter out props where frame size is between 640*480 and 1280*720\n                    return prop.width >= 640 && prop.height >= 480 && prop.width <= 1280 && prop.height <= 720;\n                });\n\n                // prefer video frame size between between 640*480 and 1280*720\n                // use maximum resolution otherwise\n                var maxResProps = preferredProps[0] || deviceProps[0];\n                return controller.setMediaStreamPropertiesAsync(Windows.Media.Capture.MediaStreamType.videoPreview, maxResProps)\n                .then(function () {\n                    return {\n                        capture: capture,\n                        width: maxResProps.width,\n                        height: maxResProps.height\n                    };\n                });\n            })\n            .then(function (captureSettings) {\n\n                capturePreview.msZoom = true;\n                capturePreview.src = URL.createObjectURL(capture);\n                capturePreview.play();\n\n                // Insert preview frame and controls into page\n                document.body.appendChild(capturePreviewFrame);\n\n                disableZoomAndScroll();\n\n                return setupFocus(captureSettings.capture.videoDeviceController.focusControl)\n                .then(function () {\n                    Windows.Graphics.Display.DisplayInformation.getForCurrentView().addEventListener(\"orientationchanged\", updatePreviewForRotation, false);\n                    return updatePreviewForRotation();\n                })\n                .then(function () {\n\n                    if (!Windows.Media.Devices.CameraStreamState) {\n                        // CameraStreamState is available starting with Windows 10 so skip this check for 8.1\n                        // https://msdn.microsoft.com/en-us/library/windows/apps/windows.media.devices.camerastreamstate\n                        return WinJS.Promise.as();\n                    }\n\n                    function checkCameraStreamState() {\n                        if (capture.cameraStreamState !== Windows.Media.Devices.CameraStreamState.streaming) {\n\n                            // Using loop as MediaCapture.CameraStreamStateChanged does not fire with CameraStreamState.streaming state.\n                            return WinJS.Promise.timeout(CAMERA_STREAM_STATE_CHECK_RETRY_TIMEOUT)\n                            .then(function () {\n                                return checkCameraStreamState();\n                            });\n                        }\n\n                        return WinJS.Promise.as();\n                    }\n\n                    // Ensure CameraStreamState is Streaming\n                    return checkCameraStreamState();\n                })\n                .then(function () {\n                    return captureSettings;\n                });\n            });\n        }\n\n        /**\n         * Removes preview frame and corresponding objects from window\n         */\n        function destroyPreview() {\n            var promise = WinJS.Promise.as();\n\n            Windows.Graphics.Display.DisplayInformation.getForCurrentView().removeEventListener(\"orientationchanged\", updatePreviewForRotation, false);\n            document.removeEventListener('backbutton', cancelPreview);\n\n            if (capturePreview) {\n                var isPlaying = !capturePreview.paused && !capturePreview.ended && capturePreview.readyState > 2;\n                if (isPlaying) {\n                    capturePreview.pause();\n                }\n\n                // http://stackoverflow.com/a/28060352/4177762\n                capturePreview.src = \"\";\n                if (capturePreview.load) {\n                    capturePreview.load();\n                }\n            }\n\n            if (capturePreviewFrame) {\n                try {\n                    document.body.removeChild(capturePreviewFrame);\n                } catch (e) {\n                    // Catching NotFoundError\n                    console.error(e);\n                }\n            }\n            capturePreviewFrame = null;\n\n            reader && reader.stop();\n            reader = null;\n\n            if (capture) {\n                try {\n                    promise = capture.stopRecordAsync();\n                } catch (e) {\n                    // Catching NotFoundError\n                    console.error(e);\n                }\n            }\n            capture = null;\n\n            enableZoomAndScroll();\n\n            return promise;\n        }\n\n        /**\n         * Stops preview and then call success callback with cancelled=true\n         * See https://github.com/phonegap-build/BarcodeScanner#using-the-plugin\n         */\n        function cancelPreview() {\n            BarcodeReader.scanCancelled = true;\n            reader && reader.stop();\n        }\n\n        function checkCancelled() {\n            if (BarcodeReader.scanCancelled || BarcodeReader.suspended) {\n                throw new Error('Canceled');\n            }\n        }\n\n        // Timeout is needed so that the .done finalizer below can be attached to the promise.\n        BarcodeReader.scanPromise = WinJS.Promise.timeout()\n        .then(function() {\n            createPreview();\n            checkCancelled();\n            return startPreview();\n        })\n        .then(function (captureSettings) {\n            checkCancelled();\n            reader = BarcodeReader.get(captureSettings.capture);\n            reader.init(captureSettings.capture, captureSettings.width, captureSettings.height);\n\n            // Add a small timeout before capturing first frame otherwise\n            // we would get an 'Invalid state' error from 'getPreviewFrameAsync'\n            return WinJS.Promise.timeout(200)\n            .then(function () {\n                checkCancelled();\n                return reader.readCode();\n            });\n        })\n        .then(function (result) {\n            // Suppress null result (cancel) on suspending\n            if (BarcodeReader.suspended) {\n                return;\n            }\n\n            destroyPreview();\n            success({\n                text: result && result.text,\n                format: result && BARCODE_FORMAT[result.barcodeFormat],\n                cancelled: !result\n            });\n        });\n\n        // Catching any errors here\n        BarcodeReader.scanPromise.done(function () { }, function (error) {\n            // Suppress null result (cancel) on suspending\n            if (BarcodeReader.suspended) {\n                return;\n            }\n\n            destroyPreview();\n            if (error.message == 'Canceled') {\n                success({\n                    cancelled: true\n                });\n            } else {\n                fail(error);\n            }\n        });\n\n        BarcodeReader.videoPreviewIsVisible = function () {\n            return capturePreviewFrame !== null;\n        }\n\n        BarcodeReader.destroyPreview = destroyPreview;\n    },\n\n    /**\n     * Encodes specified data into barcode\n     * @param  {function} success Success callback\n     * @param  {function} fail    Error callback\n     * @param  {array} args       Arguments array\n     */\n    encode: function (success, fail, args) {\n        fail(\"Not implemented yet\");\n    }\n};\n\nvar app = WinJS.Application;\n\nfunction waitForScanEnd() {\n    return BarcodeReader.scanPromise || WinJS.Promise.as();\n}\n\nfunction suspend(args) {\n    BarcodeReader.suspended = true;\n    if (args) {\n        args.setPromise(BarcodeReader.destroyPreview()\n        .then(waitForScanEnd, waitForScanEnd));\n    } else {\n        BarcodeReader.destroyPreview();\n    }\n}\n\nfunction resume() {\n    BarcodeReader.suspended = false;\n    module.exports.scan(BarcodeReader.scanCallArgs.success, BarcodeReader.scanCallArgs.fail, BarcodeReader.scanCallArgs.args);\n}\n\nfunction onVisibilityChanged() {\n    if (document.visibilityState === 'hidden'\n        && BarcodeReader.videoPreviewIsVisible && BarcodeReader.videoPreviewIsVisible() && BarcodeReader.destroyPreview) {\n        suspend();\n    } else if (BarcodeReader.suspended) {\n        resume();\n    }\n}\n\n// Windows 8.1 projects\ndocument.addEventListener('msvisibilitychange', onVisibilityChanged);\n// Windows 10 projects\ndocument.addEventListener('visibilitychange', onVisibilityChanged);\n\n// About to be suspended\napp.addEventListener('checkpoint', function (args) {\n    if (BarcodeReader.videoPreviewIsVisible && BarcodeReader.videoPreviewIsVisible() && BarcodeReader.destroyPreview) {\n        suspend(args);\n    }\n});\n\n// Resuming from a user suspension\nWindows.UI.WebUI.WebUIApplication.addEventListener(\"resuming\", function () {\n    if (BarcodeReader.suspended) {\n        resume();\n    }\n}, false);\n\nrequire(\"cordova/exec/proxy\").add(\"BarcodeScanner\", module.exports);\n"}